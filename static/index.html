<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="multi-agent-shogun 戦況ダッシュボード">
    <title>戦況報告 - multi-agent-shogun</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚔</text></svg>">
</head>
<body>
    <header>
        <div class="header-title">
            <h1>戦況報告</h1>
        </div>
        <div class="header-info">
            <div class="last-updated">
                最終更新: <span id="last-updated">-</span>
            </div>
            <div class="auto-refresh">
                <label>
                    <input type="checkbox" id="auto-refresh" checked>
                    自動更新 (5秒)
                </label>
            </div>
        </div>
    </header>

    <!-- 将軍への指示入力欄 -->
    <section id="command-input" class="command-section">
        <div class="command-container">
            <div class="command-header">
                <span class="command-icon">📜</span>
                <h2>上様へのご下命</h2>
            </div>
            <div class="command-form">
                <textarea
                    id="command-text"
                    class="command-textarea"
                    placeholder="ご命令をお書きください..."
                    rows="2"
                ></textarea>
                <button id="command-submit" class="command-button">
                    <span class="button-icon">⚔</span>
                    出陣！
                </button>
            </div>
            <div id="command-feedback" class="command-feedback" aria-live="polite"></div>
        </div>
    </section>

    <!-- 将軍ペイン出力 -->
    <section id="shogun-output" class="shogun-output-section">
        <div class="shogun-output-container">
            <div class="shogun-output-header">
                <div class="shogun-title">
                    <span class="shogun-icon">🏯</span>
                    <h2>将軍 進行状況</h2>
                </div>
                <div class="shogun-controls">
                    <button id="shogun-refresh" class="btn-shogun-refresh">
                        <span>🔄</span> 更新
                    </button>
                    <label class="shogun-auto-refresh">
                        <input type="checkbox" id="shogun-auto-refresh" checked>
                        自動更新
                    </label>
                    <button id="karo-status-badge" class="karo-badge badge-idle"
                            title="クリックで家老ターミナル表示/非表示">
                        📋 家老: <span id="karo-status-text">待機中</span>
                    </button>
                </div>
            </div>
            <pre id="shogun-terminal" class="shogun-terminal">読込中...</pre>
            <div id="karo-output-collapse" class="karo-collapse" aria-expanded="false">
                <div class="karo-collapse-header">
                    <h3>📋 家老 進行状況</h3>
                    <button id="karo-collapse-close" class="btn-karo-close">▲ 閉じる</button>
                </div>
                <pre id="karo-terminal" class="karo-terminal">読込中...</pre>
            </div>
        </div>
    </section>

    <main>
        <!-- 要対応 -->
        <section id="action-required" class="panel panel-danger">
            <h2>🚨 要対応</h2>
            <div class="content"></div>
        </section>

        <!-- 進行中 -->
        <section id="in-progress" class="panel panel-info">
            <h2>⚔ 進行中</h2>
            <div class="content"></div>
        </section>

        <!-- 本日の戦果 -->
        <section id="completed-today" class="panel panel-success">
            <h2>🏆 本日の戦果</h2>
            <div class="content"></div>
        </section>

        <!-- スキル化候補 -->
        <section id="skill-candidates" class="panel panel-warning">
            <h2>🎯 スキル化候補</h2>
            <div class="content"></div>
        </section>

        <!-- 生成されたスキル -->
        <section id="generated-skills" class="panel panel-default">
            <h2>📜 生成されたスキル</h2>
            <div class="content"></div>
        </section>

        <!-- 待機中 -->
        <section id="waiting" class="panel panel-default">
            <h2>⏳ 待機中</h2>
            <div class="content"></div>
        </section>

        <!-- 伺い事項 -->
        <section id="inquiries" class="panel panel-default">
            <h2>❓ 伺い事項</h2>
            <div class="content"></div>
        </section>
    </main>

    <!-- 足軽詳細モーダル -->
    <div id="ashigaru-modal" class="modal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-container">
            <header class="modal-header">
                <h2 id="modal-title">足軽1 進行状況</h2>
                <button class="modal-close" data-close-modal aria-label="閉じる">&times;</button>
            </header>
            <div class="modal-body">
                <pre id="modal-output" class="terminal-output">読込中...</pre>
            </div>
            <footer class="modal-footer">
                <button id="modal-refresh" class="btn-refresh">更新</button>
            </footer>
        </div>
    </div>

    <!-- スキル化候補モーダル -->
    <div id="skill-modal" class="modal">
        <div class="modal-overlay" data-close-skill-modal></div>
        <div class="modal-container skill-modal-container">
            <header class="modal-header">
                <h2>🎯 スキル化候補一覧</h2>
                <button class="modal-close" data-close-skill-modal aria-label="閉じる">&times;</button>
            </header>
            <div class="modal-body">
                <div id="skill-modal-content" class="skill-modal-content">読込中...</div>
            </div>
        </div>
    </div>

    <footer>
        <p>multi-agent-shogun-gui v2.0.0 — 戦国AIオーケストレーション</p>
    </footer>

    <script src="/static/app.js"></script>
</body>
</html>
