<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="multi-agent-shogun 戦況ダッシュボード">
    <title data-i18n="page.title">戦況報告 - multi-agent-shogun</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚔</text></svg>">
</head>
<body>
    <header>
        <div class="header-title">
            <h1 data-i18n="header.title">戦況報告</h1>
        </div>
        <div class="header-info">
            <div class="last-updated">
                <span data-i18n="header.lastUpdated">最終更新:</span> <span id="last-updated">-</span>
            </div>
            <div class="auto-refresh">
                <label>
                    <input type="checkbox" id="auto-refresh" checked>
                    <span data-i18n="header.autoRefresh">自動更新 (5秒)</span>
                </label>
            </div>
            <button id="notification-toggle" class="notification-btn inactive" title="通知" data-i18n-title="notification.enable">🔕</button>
            <div class="lang-switcher">
                <button class="lang-btn" data-lang="ja">日本語</button>
                <button class="lang-btn" data-lang="en">English</button>
            </div>
        </div>
    </header>

    <!-- 将軍への指示入力欄 -->
    <section id="command-input" class="command-section">
        <div class="command-container">
            <div class="command-header">
                <span class="command-icon">📜</span>
                <h2 data-i18n="command.title">上様へのご下命</h2>
            </div>
            <div class="command-form">
                <textarea
                    id="command-text"
                    class="command-textarea"
                    placeholder="ご命令をお書きください..."
                    data-i18n-placeholder="command.placeholder"
                    rows="2"
                ></textarea>
                <button id="command-submit" class="command-button">
                    <span class="button-icon">⚔</span>
                    <span data-i18n="command.submit">出陣！</span>
                </button>
            </div>
            <div id="command-feedback" class="command-feedback" aria-live="polite"></div>
            <div id="command-history-wrapper" class="collapsed">
                <div id="command-history-header">
                    <span data-i18n="command.history">最近のご下命</span>
                    <span class="collapse-indicator">▼</span>
                </div>
                <div id="command-history-list"></div>
            </div>
        </div>
    </section>

    <!-- 将軍ペイン出力 -->
    <section id="shogun-output" class="shogun-output-section">
        <div class="shogun-output-container">
            <div class="shogun-output-header">
                <div class="shogun-title">
                    <span class="shogun-icon">🏯</span>
                    <h2 data-i18n="shogun.title">将軍 進行状況</h2>
                </div>
                <div class="shogun-controls">
                    <button id="shogun-refresh" class="btn-shogun-refresh">
                        <span>🔄</span> <span data-i18n="shogun.refresh">更新</span>
                    </button>
                    <label class="shogun-auto-refresh">
                        <input type="checkbox" id="shogun-auto-refresh" checked>
                        <span data-i18n="shogun.autoRefresh">自動更新</span>
                    </label>
                    <button id="karo-status-badge" class="karo-badge badge-idle"
                            title="クリックで家老ターミナル表示/非表示"
                            data-i18n-title="karo.badgeTitle">
                        📋 <span data-i18n="karo.label">家老:</span> <span id="karo-status-text" data-i18n="karo.idle">待機中</span>
                    </button>
                </div>
            </div>
            <pre id="shogun-terminal" class="shogun-terminal"><span data-i18n="shogun.loading">読込中...</span></pre>
            <div id="karo-output-collapse" class="karo-collapse" aria-expanded="false">
                <div class="karo-collapse-header">
                    <h3><span class="section-icon">📋</span> <span data-i18n="karo.title">家老 進行状況</span></h3>
                    <button id="karo-collapse-close" class="btn-karo-close" data-i18n="karo.close">▲ 閉じる</button>
                </div>
                <pre id="karo-terminal" class="karo-terminal"><span data-i18n="karo.loading">読込中...</span></pre>
            </div>
        </div>
    </section>

    <!-- 足軽ステータスバー -->
    <section id="ashigaru-status" class="panel">
        <h2>
            <span class="section-icon">⚔</span>
            <span data-i18n="ashigaru.statusBar">足軽陣容</span>
        </h2>
        <div id="ashigaru-status-bar" class="ashigaru-bar"></div>
    </section>

    <main>
        <!-- 要対応 -->
        <section id="action-required" class="panel panel-danger">
            <h2><span class="section-icon">🚨</span> <span data-i18n="section.actionRequired">要対応</span></h2>
            <div class="content"></div>
        </section>

        <!-- 進行中 -->
        <section id="in-progress" class="panel panel-info">
            <h2><span class="section-icon">⚔</span> <span data-i18n="section.inProgress">進行中</span></h2>
            <div class="content"></div>
        </section>

        <!-- 本日の戦果 -->
        <section id="completed-today" class="panel panel-success">
            <h2 id="completed-today-header" style="cursor: pointer;" aria-expanded="false" aria-controls="completed-today-content">
                <span class="section-icon">🏆</span>
                <span data-i18n="section.completedToday">本日の戦果</span>
                <span id="completed-today-count" class="completed-count-badge"></span>
                <span id="completed-today-indicator" class="collapse-indicator">▼</span>
            </h2>
            <div id="completed-today-content" class="content"></div>
        </section>

        <!-- スキル化候補 -->
        <section id="skill-candidates" class="panel panel-warning collapsible-section collapsed">
            <h2 class="collapsible-header" style="cursor: pointer;" aria-expanded="false">
                <span class="section-icon">🎯</span>
                <span data-i18n="section.skillCandidates">スキル化候補</span>
                <span class="collapse-indicator">▼</span>
            </h2>
            <div class="content collapsible-content"></div>
        </section>

        <!-- 生成されたスキル -->
        <section id="generated-skills" class="panel panel-default collapsible-section collapsed">
            <h2 class="collapsible-header" style="cursor: pointer;" aria-expanded="false">
                <span class="section-icon">📜</span>
                <span data-i18n="section.generatedSkills">生成されたスキル</span>
                <span class="collapse-indicator">▼</span>
            </h2>
            <div class="content collapsible-content"></div>
        </section>

        <!-- 待機中 -->
        <section id="waiting" class="panel panel-default collapsible-section collapsed">
            <h2 class="collapsible-header" style="cursor: pointer;" aria-expanded="false">
                <span class="section-icon">⏳</span>
                <span data-i18n="section.waiting">待機中</span>
                <span class="collapse-indicator">▼</span>
            </h2>
            <div class="content collapsible-content"></div>
        </section>

        <!-- 伺い事項 -->
        <section id="inquiries" class="panel panel-default collapsible-section collapsed">
            <h2 class="collapsible-header" style="cursor: pointer;" aria-expanded="false">
                <span class="section-icon">❓</span>
                <span data-i18n="section.inquiries">伺い事項</span>
                <span class="collapse-indicator">▼</span>
            </h2>
            <div class="content collapsible-content"></div>
        </section>
    </main>

    <!-- 足軽詳細モーダル -->
    <div id="ashigaru-modal" class="modal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-container">
            <header class="modal-header">
                <h2 id="modal-title">足軽1 進行状況</h2>
                <button class="modal-close" data-close-modal aria-label="閉じる" data-i18n-aria-label="modal.close">&times;</button>
            </header>
            <div class="modal-body">
                <pre id="modal-output" class="terminal-output"><span data-i18n="modal.loading">読込中...</span></pre>
            </div>
            <footer class="modal-footer">
                <button id="modal-refresh" class="btn-refresh" data-i18n="modal.refresh">更新</button>
            </footer>
        </div>
    </div>

    <!-- スキル化候補モーダル -->
    <div id="skill-modal" class="modal">
        <div class="modal-overlay" data-close-skill-modal></div>
        <div class="modal-container skill-modal-container">
            <header class="modal-header">
                <h2><span class="section-icon">🎯</span> <span data-i18n="skill.modalTitle">スキル化候補一覧</span></h2>
                <button class="modal-close" data-close-skill-modal aria-label="閉じる" data-i18n-aria-label="modal.close">&times;</button>
            </header>
            <div class="modal-body">
                <div id="skill-modal-content" class="skill-modal-content"><span data-i18n="modal.loading">読込中...</span></div>
            </div>
        </div>
    </div>

    <footer>
        <p>multi-agent-shogun-gui v2.0.0 — <span data-i18n="footer.text">戦国AIオーケストレーション</span></p>
    </footer>

    <script src="/static/i18n.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
